---
title: ArcGISJS学习之规范化json数据
category: ArcGIS
tags:
  - GeoJson
  - ArcGIS Geometries
  - ArcGIS for JS
date: 2017-10-29 00:00:00
---
# 1 GeoJson规范

## 1.1 概要

### 1.1.1 FeatureCollection

<!--more-->

|属性名|含义|数据类型|默认值|
|:---|:---|:---|:---|
|type| 数据类型 |string|FeatureCollection|
|metadata| 页头信息 |json|详细参考`1.2 metadata`|
|features| 数据集 |array|默认为空|
|feature| 数据集点 |json|详细参考`1.3 feature`|

```javascript
  //举个栗子
  var t_GeoJson={
      "type": "FeatureCollection",
      "metadata": {},
      "features": [feature,feature,feature]
  };
```

### 1.1.2 GeometryCollection

|属性名|含义|数据类型|默认值|
|:---|:---|:---|:---|
|type| 数据类型 |string|GeometryCollection|
|geometries| 数据集 |array|默认为空|
|geometry| 数据集点 |json|详细参考`1.5 geometry`|

```javascript
  //举个栗子
  var t_GeoJson=  {
    "type" : "GeometryCollection",
    "geometries" : [geometry,geometry,geometry]
  };
```

## 1.2 metadata

|属性名|含义|数据类型|默认值|
|:---|:---|:---|:---|
|generated| 数据产生时间 |date|新建时间的时间戳|
|url| 文件路径 |string|默认为空|
|title|产生数据的公司名 |string|默认为空|
|status|获取文件返回状态值|number|默认为200|
|count|数据中features的长度|number|默认为0|

```javascript
  //举个栗子
  var starttime =new Date();
  var t_metadata={
    "generated": Number(starttime),
    "url":'',
    "title": "西瓜信息技术股份有限公司",
    "status": 200,
    "api": '',
    "count": 0
  };
```

## 1.3 feature

|属性名|含义|数据类型|默认值|
|:---|:---|:---|:---|
|type| 数据类型 |string|Feature|
|properties| 功能属性 |json|详细参考`1.4 properties`|
|geometry|地理信息点集合 |json|详细参考`1.5 geometry`|
|id|唯一标识的属性值|string|默认为空|

```javascript
  //举个栗子
  var t_feature={
    type: 'Feature',
    properties:  {},
    geometry:  {},
    id:'Feature_1'
  }
```

## 1.4 properties

> 属性参数值完全自定义，仅列出几个常用的

|属性名|含义|数据类型|默认值|
|:---|:---|:---|:---|
|time| 文件创建时间戳 |date|默认为空|
|updated| 文件更新时间戳 |date|默认为空|
|net|区分不同feature的前缀 |string|默认为空|
|code|区分不同feature的唯一标识后缀|string|默认为空|
|place|地点所属信息 |string|默认为空|

```javascript
  //举个栗子
  var t_properties={
      time: 1513318909100,
      updated: 1513319134021,
      net: "ci",
      code: "37830103",
      place: "9km NE of Aguanga, CA"
  }
```

## 1.5 geometry

|属性名|含义|数据类型|默认值|
|:---|:---|:---|:---|
|type| 数据类型 |string|["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"]|
|coordinates| 坐标点 |array|默认为空|

```javascript
  //举个栗子
  var t_geometry={
      type: "Point",
      coordinates: [
        -116.7933333,
        33.4948333
      ]
    }
```

# 2 ArcGISJson规范

## 2.1 概要

|属性名|含义|数据类型|默认值|
|:---|:---|:---|:---|
|geometry| 数据点集合 |json|详细参考`2.2 geometry`|
|attributes| 从数据库带出来的点数据属性 |json|默认为空|

```javascript
  //举个栗子
  var t_ArcGISJson={
      geometry: {},
      attributes:{}
    }
```

## 2.2 geometry

|属性名|含义|数据类型|默认值|
|:---|:---|:---|:---|
|rings| 数据点数据集合 |array|默认为空|
|spatialReference| 坐标系相关信息 |json|详细参考`2.3 spatialReference`|

```javascript
  //举个栗子
  var t_geometry={
      rings: [],
      spatialReference:{}
    }
```

## 2.3 spatialReference

|属性名|含义|数据类型|默认值|
|:---|:---|:---|:---|
|wkid| 当前坐标系 |number|默认为102100|
|latestWkid| 上形状的一个坐标系 |number|默认为3857|

```javascript
  //举个栗子
  var t_spatialReference={
      "wkid": 2361,
      "latestWkid": 4358
    }
```

# 3 dataJson规范

## 3.1 Point

### 3.1.1 Point数据

> xml

```xml
  <?xml version="1.0" encoding="gb2312" ?>
 <GeoStar>
    <pts num="1" type="point">
      <pt num="1" x="39403538.6587504" y="3074587.77015091" />
    </pts>
 </GeoStar>
```

> GeoJson

```javascript
  {
    "type": "Point",
    "coordinates": [0,0]
  };
```

> ArcGISJson

```javascript
  {
    "x":0,
    "y":0,
    "spatialReference":{
      "wkid":4326
    }
  }
```

### 3.1.2 MultiPoint数据

> xml

```xml
  <?xml version="1.0" encoding="gb2312" ?>
 <GeoStar>
    <pts num="1" type="point">
      <pt num="1" x="39403538.6587504" y="3074587.77015091" />
      <pt num="2" x="39403543.4112997" y="3074417.86005092" />
      <pt num="3" x="39403540.6814504" y="3074422.05055086" />
      <pt num="4" x="39403533.3421502" y="3074433.35985036" />
    </pts>
 </GeoStar>
```

> GeoJson

```javascript
  {
    "type": "MultiPoint",
    "coordinates": [
      [
        39403538.6587504,
        3074587.77015091
      ],
      [
        39403543.4112997,
        3074417.86005092
      ],
      [
        39403540.6814504,
        3074422.05055086
      ],
      [
        39403533.3421502,
        3074433.35985036
      ]
    ]
  }
```

> ArcGISJson

```javascript
  {
    "points": [
      [
        39403538.6587504,
        3074587.77015091
      ],
      [
        39403543.4112997,
        3074417.86005092
      ],
      [
        39403540.6814504,
        3074422.05055086
      ],
      [
        39403533.3421502,
        3074433.35985036
      ]
    ],
    "spatialReference": {
      "wkid": 4326
    }
  }
```

## 3.2 Polyline

### 3.2.1 Polyline数据

> xml

```xml
  <?xml version="1.0" encoding="gb2312" ?>
 <GeoStar>
    <pts num="1" type="line">
      <pts num="1" type="line">
        <pt num="1" x="39402074.9148183" y="3085203.38736518" />
        <pt num="2" x="39402075.2866289" y="3085201.19406264" />
      </pts>
    </pts>
 </GeoStar>
```

> GeoJson

```javascript
  {
    "type": "LineString",
    "coordinates": [
      [
        39402074.9148183,
        3085203.38736518
      ],
      [
        39402075.2866289,
        3085201.19406264
      ]
    ]
  }
```

> ArcGISJson

```javascript
  {
    "paths": [
      [
        [
          39402074.9148183,
          3085203.38736518
        ],
        [
          39402075.2866289,
          3085201.19406264
        ]
      ]
    ],
    "spatialReference": {
      "wkid": 4326
    }
  }
```

### 3.2.2 MultiPolyline数据

> xml

```xml
<?xml version="1.0" encoding="gb2312" ?>
 <GeoStar>
    <pts num="1" type="line">
      <pts num="1" type="line">
        <pt num="1" x="39402074.9148183" y="3085203.38736518" />
        <pt num="2" x="39402075.2866289" y="3085201.19406264" />
      </pts>
      <pts num="2" type="line">
        <pt num="1" x="39402088.7842049" y="3085954.221558" />
        <pt num="2" x="39402089.6243769" y="3085957.43230666" />
      </pts>
      <pts num="3" type="line">
        <pt num="1" x="39402089.6243769" y="3085957.43230666" />
        <pt num="2" x="39402099.5382456" y="3085954.811617" />
      </pts>
      <pts num="4" type="line">
        <pt num="1" x="39402099.5382456" y="3085954.811617" />
        <pt num="2" x="39402097.2217816" y="3085946.92696906" />
      </pts>
    </pts>
 </GeoStar>
```

> GeoJson

```javascript
  {
    "type": "MultiLineString",
    "coordinates": [
      [ [39402074.9148183,3085203.38736518],[39402075.2866289,3085201.19406264] ],
      [ [39402088.7842049,3085954.221558],[39402089.6243769,3085957.4323066] ],
      [ [39402089.6243769,3085957.43230666],[39402099.5382456,3085954.811617] ],
      [ [39402099.5382456,3085954.811617],[39402097.2217816,3085946.92696906] ]
    ]
  }
```

> ArcGISJson

```javascript
  {
    "paths": [
      [ [39402074.9148183,3085203.38736518],[39402075.2866289,3085201.19406264] ],
      [ [39402088.7842049,3085954.221558],[39402089.6243769,3085957.4323066] ],
      [ [39402089.6243769,3085957.43230666],[39402099.5382456,3085954.811617] ],
      [ [39402099.5382456,3085954.811617],[39402097.2217816,3085946.92696906] ]
    ],
    "spatialReference":{
      "wkid":4326
    }
  }
```

## 3.3 Polygon

### 3.3.1 Polygon数据

> xml

```xml
<?xml version="1.0" encoding="gb2312" ?>
 <GeoStar>
   <pts num="1" type="polygon">
      <pts num="1" type="polygon">
        <pt num="1" x="39403576.9029002" y="3074528.48695056" />
        <pt num="2" x="39403553.7662496" y="3074513.69820033" />
        <pt num="3" x="39403551.5182278" y="3074517.19848639" />
        <pt num="4" x="39403548.3623503" y="3074522.11235071" />
        <pt num="5" x="39403571.3602499" y="3074537.01955018" />
        <pt num="6" x="39403574.5269088" y="3074532.1446557" />
        <pt num="7" x="39403576.9029002" y="3074528.48695056" />
      </pts>
    </pts>
 </GeoStar>
```

> GeoJson

```javascript
  {
    "type": "Polygon",
    "coordinates": [
      [
        [
          39403576.9029002,
          3074528.48695056
        ],
        [
          39403553.7662496,
          3074513.69820033
        ],
        [
          39403551.5182278,
          3074517.19848639
        ],
        [
          39403548.3623503,
          3074522.11235071
        ],
        [
          39403571.3602499,
          3074537.01955018
        ],
        [
          39403574.5269088,
          3074532.1446557
        ],
        [
          39403576.9029002,
          3074528.48695056
        ]
      ]
    ]
  }

```

> ArcGISJson

```javascript
  {
    "rings": [
      [
        [
          39403576.9029002,
          3074528.48695056
        ],
        [
          39403553.7662496,
          3074513.69820033
        ],
        [
          39403551.5182278,
          3074517.19848639
        ],
        [
          39403548.3623503,
          3074522.11235071
        ],
        [
          39403571.3602499,
          3074537.01955018
        ],
        [
          39403574.5269088,
          3074532.1446557
        ],
        [
          39403576.9029002,
          3074528.48695056
        ]
      ]
    ],
    "spatialReference": {
      "wkid": 4326
    }
  }
```

### 3.3.2 MultiPolygon数据

> xml

```xml
<?xml version="1.0" encoding="gb2312" ?>
 <GeoStar>
   <pts num="1" type="polygon">
      <pts num="1" type="polygon">
        <pt num="1" x="39403576.9029002" y="3074528.48695056" />
        <pt num="2" x="39403553.7662496" y="3074513.69820033" />
        <pt num="3" x="39403551.5182278" y="3074517.19848639" />
        <pt num="4" x="39403548.3623503" y="3074522.11235071" />
        <pt num="5" x="39403571.3602499" y="3074537.01955018" />
        <pt num="6" x="39403574.5269088" y="3074532.1446557" />
        <pt num="7" x="39403576.9029002" y="3074528.48695056" />
      </pts>
      <pts num="2" type="polygon">
        <pt num="1" x="39403571.5510812" y="3074204.91445576" />
        <pt num="2" x="39403606.1226998" y="3074150.2527506" />
        <pt num="3" x="39403557.7287" y="3074119.98975049" />
        <pt num="4" x="39403502.7917" y="3074207.79574996" />
        <pt num="5" x="39403550.6100553" y="3074238.02463336" />
        <pt num="6" x="39403550.657939" y="3074237.94859318" />
        <pt num="7" x="39403571.5510812" y="3074204.91445576" />
      </pts>
      <pts num="3" type="polygon">
        <pt num="1" x="39403611.6048495" y="3074470.44865039" />
        <pt num="2" x="39403589.647" y="3074456.46835047" />
        <pt num="3" x="39403588.0641691" y="3074459.0560815" />
        <pt num="4" x="39403586.5204" y="3074461.57995062" />
        <pt num="5" x="39403583.09385" y="3074466.70520084" />
        <pt num="6" x="39403604.79485" y="3074481.21385012" />
        <pt num="7" x="39403608.22145" y="3074476.0886009" />
        <pt num="8" x="39403609.9761004" y="3074473.0069" />
        <pt num="9" x="39403611.6048495" y="3074470.44865039" />
      </pts>
      <pts num="4" type="polygon">
        <pt num="1" x="39403602.4861997" y="3074075.92495068" />
        <pt num="2" x="39403606.2165827" y="3074069.99364024" />
        <pt num="3" x="39403610.4104819" y="3074063.32533933" />
        <pt num="4" x="39403613.1025495" y="3074059.04495028" />
        <pt num="5" x="39403600.9451504" y="3074051.29040028" />
        <pt num="6" x="39403598.2374224" y="3074055.56076534" />
        <pt num="7" x="39403593.9818085" y="3074062.27230567" />
        <pt num="8" x="39403590.2175995" y="3074068.20885092" />
        <pt num="9" x="39403602.4861997" y="3074075.92495068" />
      </pts>
    </pts>
 </GeoStar>
```

> GeoJson

```javascript
  {
    "type": "MultiPolygon",
    "coordinates": [
        [
          [39403576.9029002,3074528.48695056],[39403553.7662496,3074513.69820033],[39403551.5182278,3074517.19848639],[39403548.3623503,3074522.11235071],[39403571.3602499,3074537.01955018],[39403574.5269088,3074532.1446557],[39403576.9029002,3074528.48695056]
        ],
        [
          [39403571.5510812,3074204.91445576],[39403606.1226998,3074150.2527506],[39403557.7287,3074119.98975049],[39403502.7917,3074207.79574996],[39403550.6100553,3074238.02463336],[39403550.657939,3074237.94859318],[39403571.5510812,3074204.91445576]
        ],
        [
          [39403611.6048495,3074470.44865039],[39403589.647,3074456.46835047],[39403588.0641691,3074459.0560815],[39403586.5204,3074461.57995062],[39403583.09385,3074466.70520084],[39403604.79485,3074481.21385012],[39403608.22145,3074476.0886009],[39403609.9761004,3074473.0069],[39403611.6048495,3074470.44865039]
        ],
        [
          [39403602.4861997,3074075.92495068],[39403606.2165827,3074069.99364024],[39403610.4104819,3074063.32533933],[39403613.1025495,3074059.04495028],[39403600.9451504,3074051.29040028],[39403598.2374224,3074055.56076534],[39403593.9818085,3074062.27230567],[39403590.2175995,3074068.20885092],[39403602.4861997,3074075.92495068]
        ],
      ]
  };

```

> ArcGISJson

```javascript
  {
    "rings": [
        [
          [39403576.9029002,3074528.48695056],[39403553.7662496,3074513.69820033],[39403551.5182278,3074517.19848639],[39403548.3623503,3074522.11235071],[39403571.3602499,3074537.01955018],[39403574.5269088,3074532.1446557],[39403576.9029002,3074528.48695056]
        ],
        [
          [39403571.5510812,3074204.91445576],[39403606.1226998,3074150.2527506],[39403557.7287,3074119.98975049],[39403502.7917,3074207.79574996],[39403550.6100553,3074238.02463336],[39403550.657939,3074237.94859318],[39403571.5510812,3074204.91445576]
        ],
        [
          [39403611.6048495,3074470.44865039],[39403589.647,3074456.46835047],[39403588.0641691,3074459.0560815],[39403586.5204,3074461.57995062],[39403583.09385,3074466.70520084],[39403604.79485,3074481.21385012],[39403608.22145,3074476.0886009],[39403609.9761004,3074473.0069],[39403611.6048495,3074470.44865039]
        ],
        [
          [39403602.4861997,3074075.92495068],[39403606.2165827,3074069.99364024],[39403610.4104819,3074063.32533933],[39403613.1025495,3074059.04495028],[39403600.9451504,3074051.29040028],[39403598.2374224,3074055.56076534],[39403593.9818085,3074062.27230567],[39403590.2175995,3074068.20885092],[39403602.4861997,3074075.92495068]
        ],
      ],
    "spatialReference":{
      "wkid":4326
    }
  }
```

## 混合数据

> GeoJson

```javascript
  {
    "type" : "GeometryCollection",
    "geometries" : [{
      "type" : "Polygon",
      "coordinates" : [[[-95, 43], [-95, 50], [-90, 50], [-91, 42], [-95, 43]]]
    }, {
      "type" : "LineString",
      "coordinates" : [[-89, 42], [-89, 50], [-80, 50], [-80, 42]]
    }, {
      "type" : "Point",
      "coordinates" : [-94, 46]
    }]
  }



  {
    "type": "FeatureCollection",
    "features": [{
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [102.0, 0.5]
      },
      "properties": {
        "prop0": "value0"
      }
    }, {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [102.0, 0.0],[103.0, 1.0],[104.0, 0.0],[105.0, 1.0]
        ]
      },
      "properties": {
        "prop0": "value0"
      }
    }, {
      "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [ [100.0, 0.0],[101.0, 0.0],[101.0, 1.0],[100.0, 1.0],[100.0, 0.0] ]
        ]
      },
      "properties": {
        "prop0": "value0"
      }
    }]
  }
```

> ArcGISJson

```javascript
  [{
    "rings": [
      [[-95, 43],[-95, 50],[-90, 50],[-91, 42],[-95, 43]]
    ],
    "spatialReference": {
      "wkid": 4326
    }
  }, {
    "paths": [
      [[-89, 42],[-89, 50],[-80, 50],[-80, 42]]
    ],
    "spatialReference": {
      "wkid": 4326
    }
  }, {
    "x": -94,
    "y": 46,
    "spatialReference": {
      "wkid": 4326
    }
  }]


  [{
    "geometry": {
      "x": 102,
      "y": 0.5,
      "spatialReference": {
        "wkid": 4326
      }
    },
    "attributes": {
      "prop0": "value0"
    }
  }, {
    "geometry": {
      "paths": [
        [[102, 0],[103, 1],[104, 0],[105, 1]]
      ],
      "spatialReference": {
        "wkid": 4326
      }
    },
    "attributes": {
      "prop0": "value0"
    }
  }, {
    "geometry": {
      "rings": [
        [ [100,0],[100,1],[101,1],[101,0],[100,0] ]
      ],
      "spatialReference": {
        "wkid": 4326
      }
    },
    "attributes": {
      "prop0": "value0"
    }
  }]
```